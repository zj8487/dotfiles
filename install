#!/bin/bash
set -e

# TODO update o script, cant rely on gnome-open anymore
#echo "---- INSTALLING: copy o script"
#sudo ln -fs ~/dotfiles/bash/o /usr/bin/o

echo "---- INSTALLING: setting up folder structure"
mkdir -p ~/tmp ~/src ~/.ssh

echo "---- INSTALLING: symlink for ~/.ssh/config"
ln -fs ~/dotfiles/ssh/config ~/.ssh/config

echo "---- INSTALLING: setting up keyboard preferences"
sudo cp ~/dotfiles/keyboard /etc/default/keyboard

echo "---- INSTALLING: symlink for ~/.bashrc"
ln -fs ~/dotfiles/bash/bashrc ~/.bashrc

echo "---- INSTALLING: symlink for ~/.gitconfig"
ln -fs ~/dotfiles/git/gitconfig ~/.gitconfig

echo "---- INSTALLING: setting up symbolic link for emacs"
ln -fs ~/dotfiles/emacs/emacs ~/.emacs
sudo ln -fs ~/dotfiles/bash/e /usr/bin/e

echo "---- INSTALLING: updating git submodules"
git submodule init
git submodule update

# start apt-get specifics

echo "---- INSTALLING: build-essential"
sudo apt-get install --assume-yes build-essential

#echo "---- INSTALLING: libnss3-tools (for certutil)"
#sudo apt-get install --assume-yes libnss3-tools

echo "---- INSTALLING: gdb"
sudo apt-get install --assume-yes gdb
sudo sysctl kernel.core_pattern='core'

echo "---- INSTALLING: xinit"
sudo apt-get install --assume-yes xinit

echo "---- INSTALLING: awesome"
sudo apt-get install --assume-yes awesome

#echo "---- INSTALLING: aptitude"
#sudo apt-get install --assume-yes aptitude

echo "---- INSTALLING: curl"
sudo apt-get install --assume-yes curl

echo "---- INSTALLING: imagemagick"
sudo apt-get install --assume-yes imagemagick

echo "---- INSTALLING: mplayer2"
sudo apt-get install --assume-yes mplayer2

#echo "---- INSTALLING: mpg321 for mpg123"
#sudo apt-get install --assume-yes mpg321

#echo "---- INSTALLING: ffmpeg"
#sudo apt-get install --assume-yes ffmpeg

#echo "---- INSTALLING: flac"
#sudo apt-get install --assume-yes flac

#echo "---- INSTALLING: lame mp3 encoding library"
#sudo apt-get install --assume-yes lame

echo "---- INSTALLING: xclip"
sudo apt-get install --assume-yes xclip

#echo "---- INSTALLING: wamerican-insane"
#sudo apt-get install --assume-yes wamerican-insane
# dict file installed in /usr/share/dict/american-english-insane

#echo "---- INSTALLING: yum"
#sudo apt-get install --assume-yes yum

echo "---- INSTALLING: ack-grep"
sudo apt-get install --assume-yes ack-grep

echo "---- INSTALLING: tree"
sudo apt-get install --assume-yes tree

#echo "---- INSTALLING: intltool"
#sudo apt-get install --assume-yes intltool

echo "---- INSTALLING: whois (for mkpasswd)"
sudo apt-get install --assume-yes whois

echo "---- INSTALLING: gimp"
sudo apt-get install --assume-yes gimp

#echo "---- INSTALLING: cvs"
#sudo apt-get install --assume-yes cvs

echo "---- INSTALLING: irssi"
sudo apt-get install --assume-yes irssi

echo "---- INSTALLING: nc6"
sudo apt-get install --assume-yes netcat6

#echo "---- INSTALLING: eog"
#sudo apt-get install --assume-yes eog

echo "---- INSTALLING: rar"
sudo apt-get install --assume-yes rar unrar

#echo "---- INSTALLING: pip"
#sudo apt-get install --assume-yes python-pip

#echo "---- INSTALLING: traceroute"
#sudo apt-get install --assume-yes traceroute

echo "---- INSTALLING: emacs"
sudo apt-get install --assume-yes emacs24

echo "---- INSTALLING: firefox"
sudo apt-get install --assume-yes firefox

source ~/dotfiles/install-fonts
#source ~/dotfiles/install-node
#source ~/dotfiles/install-npm-modules
#source ~/dotfiles/install-pidgin
#source ~/dotfiles/install-ssh

echo "---- INSTALL: Finished successfully!"

echo "---- CLEANUP: Running autoremove"
sudo apt-get autoremove --assume-yes

